<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Paginated Comments</title>
  <style>
    /* Basic CSS for styling */
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 20px;
    }
    .comment {
      margin-bottom: 15px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
    }
    .comment p {
      margin: 5px 0;
    }
    .pagination {
      margin-top: 20px;
    }
    .pagination button {
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <h1>Paginated Comments</h1>

  <!-- Post a comment form -->
  <h2>Post a Comment</h2>
  <form id="commentForm">
    <label for="comment">Your Comment:</label><br>
    <textarea id="comment" name="comment" rows="4" cols="50" required></textarea><br><br>
    <button type="submit">Post Comment</button>
  </form>

  <!-- Display comments -->
  <h2>Comments</h2>
  <div id="commentsContainer"></div>

  <!-- Pagination controls -->
  <div class="pagination">
    <button id="prevPageBtn" disabled>Previous Page</button>
    <button id="nextPageBtn">Next Page</button>
  </div>

  <!-- JavaScript for handling comments and pagination -->
  <script>
    // Function to post a comment
    document.getElementById('commentForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const commentText = document.getElementById('comment').value;
      if (commentText.trim() === '') {
        alert('Please enter a comment.');
        return;
      }

      // Create a unique ID for the comment (simulate server-side ID)
      const commentId = new Date().getTime();

      // Save the comment to localStorage
      const commentData = {
        id: commentId,
        username: 'Guest', // Replace with actual username when authentication is implemented
        comment: commentText,
        timestamp: new Date().toLocaleString()
      };

      // Save comment to localStorage
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      comments.push(commentData);
      localStorage.setItem('comments', JSON.stringify(comments));

      // Display the comment immediately
      displayComments(currentPage);
      
      // Clear the comment textarea
      document.getElementById('comment').value = '';
    });

    // Function to display comments from localStorage based on pagination
    let currentPage = 1;
    const commentsPerPage = 20;

    function displayComments(page) {
      const commentsContainer = document.getElementById('commentsContainer');
      commentsContainer.innerHTML = '';

      const comments = JSON.parse(localStorage.getItem('comments')) || [];

      const startIndex = (page - 1) * commentsPerPage;
      const endIndex = startIndex + commentsPerPage;
      const paginatedComments = comments.slice(startIndex, endIndex);

      paginatedComments.forEach(function(comment) {
        const commentElement = document.createElement('div');
        commentElement.classList.add('comment');
        commentElement.innerHTML = `
          <p><strong>${comment.username}</strong> - <em>${comment.timestamp}</em></p>
          <p>${comment.comment}</p>
        `;
        commentsContainer.appendChild(commentElement);
      });

      // Update pagination buttons based on current page
      document.getElementById('prevPageBtn').disabled = (currentPage === 1);
      document.getElementById('nextPageBtn').disabled = (endIndex >= comments.length);
    }

    // Initial display of comments
    displayComments(currentPage);

    // Pagination event listeners
    document.getElementById('prevPageBtn').addEventListener('click', function() {
      if (currentPage > 1) {
        currentPage--;
        displayComments(currentPage);
      }
    });

    document.getElementById('nextPageBtn').addEventListener('click', function() {
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      const totalPages = Math.ceil(comments.length / commentsPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        displayComments(currentPage);
      }
    });
  </script>

</body>
    </html>
  
